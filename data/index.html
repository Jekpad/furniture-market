<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <script type="text/javascript" src="qrcode.js">
	</script>
    <script type="text/javascript" src="html5-qrcode.js">
	</script>
	<script type="text/javascript">	
		window.addEventListener("message", function(event)
		{
			var eventData = JSON.parse(event.data);
			var str = "";
			for(var eventName in eventData)
			{
				if(eventName=="showQR")
				{
					window.updateQRCode(eventData[eventName]);
				}
			}
		}, false
		);
		function updateQRCode(text)
		{
			var element = document.getElementById("qrcode");

			if(element.lastChild)
			  element.replaceChild(showQRCode(text), element.lastChild);
			else
			  element.appendChild(showQRCode(text));
		}
		function onLoad()
		{
			var url=document.URL;
			var spliturl=url.split("?");
			var paramstr = "";
			if(spliturl.length>1)
			{
				paramstr = spliturl.splice(1).join("?");
			}
			var splitparams = paramstr.split("&");
			for(var i=0; i<splitparams.length; i++)
			{
				var param = splitparams[i];
				var splitparam = param.split("=");
				if(splitparam.length==2)
				{
					var name=splitparam[0];
					var value=unescape(splitparam[1]);
					if(name=="loadText")
					{
						updateQRCode(value);
						break;
					}
				}
			}
		}
	</script>
  </head>
  <body onload="onLoad()" style="margin: 0px; width: 300px">
  <!-- This is where our QRCode will appear in. -->
    <div id="qrcode"></div>
  </body>
</html>